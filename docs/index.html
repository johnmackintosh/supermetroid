<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="What the package does (one paragraph).">
<title>What the Package Does (One Line, Title Case) • supermetroid</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (One Line, Title Case)">
<meta property="og:description" content="What the package does (one paragraph).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">supermetroid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/route-graph.html">route-graph</a>
    <a class="dropdown-item" href="articles/route-matching.html">route-matching</a>
    <a class="dropdown-item" href="articles/sio.html">sio</a>
    <a class="dropdown-item" href="articles/splits.html">splits</a>
    <a class="dropdown-item" href="articles/src.html">src</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><ul>
<li><a href="#supermetroid">supermetroid</a></li>
<li>
<a href="#what-is-super-metroid">What is Super Metroid?</a>
<ul>
<li><a href="#super-metroid-speed-running">Super Metroid speed running</a></li>
</ul>
</li>
<li><a href="#analyses-work-in-progress">Analyses (work in progress)</a></li>
<li>
<a href="#super-metroid-and-speed-running">Super Metroid and speed running</a>
<ul>
<li><a href="#super-metroid-is-the-top-snes-speed-runner-game">Super Metroid is the top SNES speed runner game</a></li>
<li><a href="#subway-surfers-tiktok-phenomenon-or-good-upload-interface">Subway Surfers TikTok phenomenon or good upload interface?</a></li>
</ul>
</li>
<li>
<a href="#run-times">Run times</a>
<ul>
<li><a href="#speed-run-times-from-speedruncom">Speed run times from speedrun.com</a></li>
</ul>
</li>
<li>
<a href="#segment-times">Segment times</a>
<ul>
<li><a href="#label-chaos">Label chaos</a></li>
<li><a href="#comparison-of-segments">Comparison of segments</a></li>
<li><a href="#single-segment-analyses">Single segment analyses</a></li>
</ul>
</li>
<li>
<a href="#getting-the-data">Getting the data</a>
<ul>
<li><a href="#sources">Sources</a></li>
<li>
<a href="#desired-output-ggplot-friendlytidy-data">Desired output: <code>ggplot</code>-friendly/tidy data</a>
<ul>
<li><a href="#runs">Runs</a></li>
<li><a href="#location-of-players-on-speedruncom">Location of players on speedrun.com</a></li>
<li><a href="#segments-for-each-run-from-splitsio">Segments for each run from splitsio</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#import-pkg--helper-functions">Import pkg &amp; helper functions</a>
<ul>
<li><a href="#last-updated">Last updated</a></li>
</ul>
</li>
<li>
<a href="#speedruncom">speedrun.com</a>
<ul>
<li><a href="#load-runs-from-100-leaderboard">Load runs from 100% leaderboard</a></li>
<li>
<a href="#run-dataframe">Run dataframe</a>
<ul>
<li><a href="#visualise-runs">Visualise runs</a></li>
<li><a href="#raincloud">Raincloud</a></li>
<li><a href="#write-run-data-from-speedruncom-to-supermetroid">Write run data from speedrun.com to supermetroid</a></li>
</ul>
</li>
<li>
<a href="#player-data">Player data</a>
<ul>
<li><a href="#location-of-players-on-speedruncom-1">Location of players on speedrun.com</a></li>
<li><a href="#not-all-ids-are-valid">Not all ids are valid</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#splitsio">splits.io</a>
<ul>
<li><a href="#load-runs-and-runners">Load runs and runners</a></li>
</ul>
</li>
<li>
<a href="#try-with-converting-to-a-dictionary-much-earlier">Try with converting to a dictionary much earlier</a>
<ul>
<li><a href="#inspect-data">Inspect data</a></li>
<li><a href="#run-dataframe-1">Run dataframe</a></li>
<li><a href="#try-with-list-of-dictionaries">Try with list of dictionaries</a></li>
<li><a href="#create-segments-dataframe">create segments dataframe</a></li>
<li><a href="#fucking-segment-labels">fucking segment labels</a></li>
</ul>
</li>
<li><a href="#deertier">deertier</a></li>
<li><a href="#speedrunslive">speedrunslive</a></li>
<li><a href="#wikipedia">wikipedia</a></li>
<li><a href="#later">later</a></li>
</ul>
<!-- README.md is generated from README.Rmd. Please edit that file --><div class="section level1">
<div class="page-header"><h1 id="supermetroid">supermetroid<a class="anchor" aria-label="anchor" href="#supermetroid"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>This is an analysis repository that captures Super Metroid speed run data from leaderboards and aims to analyse the data to answer the following question, posed by a runner.</p>
<blockquote>
<p>At what times do Super Metroid 100% speed runs get competitive?</p>
</blockquote>
</div>
<div class="section level1">
<h1 id="what-is-super-metroid">What is Super Metroid?<a class="anchor" aria-label="anchor" href="#what-is-super-metroid"></a>
</h1>
<blockquote>
<p>While the exploration-focused platformers known as Metroidvanias derive their genre name from two different series, there’s one game they’re all judged by. Super Metroid wasn’t the first Metroidvania, the first Metroid game also had the focus on exploring a large interconnected map and using new abilities to open up new areas, but its polish, visual direction, and atmosphere all created a more involved experience than its predecessors. Released in 1994, Super Metroid’s shadow looms over every game in the genre since… - <a href="https://thegamehoard.com/2022/04/24/50-years-of-video-games-super-metroid-snes/" class="external-link">thegamehoard 2022</a></p>
</blockquote>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># source: wikipedia</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">include_graphics</a></span><span class="op">(</span><span class="st">"img/Smetroidbox-wiki.png"</span><span class="op">)</span></span></code></pre></div>
<p><img src="img/Smetroidbox-wiki.png" width="50%" style="display: block; margin: auto;"></p>
<div class="section level2">
<h2 id="super-metroid-speed-running">Super Metroid speed running<a class="anchor" aria-label="anchor" href="#super-metroid-speed-running"></a>
</h2>
<p>As part of the verification of their speed run results, many players upload a <a href="https://www.youtube.com/embed/7-cj22T2Yu4" class="external-link">video of the run</a> to youtube.</p>
</div>
</div>
<div class="section level1">
<h1 id="analyses-work-in-progress">Analyses (work in progress)<a class="anchor" aria-label="anchor" href="#analyses-work-in-progress"></a>
</h1>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://softloud.github.io/supermetroid/">supermetroid</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span> <span class="co"># data science tools</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span> <span class="co"># for html tables</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="super-metroid-and-speed-running">Super Metroid and speed running<a class="anchor" aria-label="anchor" href="#super-metroid-and-speed-running"></a>
</h1>
<div class="section level2">
<h2 id="super-metroid-is-the-top-snes-speed-runner-game">Super Metroid is the top SNES speed runner game<a class="anchor" aria-label="anchor" href="#super-metroid-is-the-top-snes-speed-runner-game"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/top_five_vis.html">top_five_vis</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="100%"></p>
<ul class="task-list">
<li>
<input type="checkbox">convert to coloured barchart, grouped by game, coloured by category</li>
<li>
<input type="checkbox">can we scrape these data?</li>
</ul>
</div>
<div class="section level2">
<h2 id="subway-surfers-tiktok-phenomenon-or-good-upload-interface">Subway Surfers TikTok phenomenon or good upload interface?<a class="anchor" aria-label="anchor" href="#subway-surfers-tiktok-phenomenon-or-good-upload-interface"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/top_games_vis.html">top_games_vis</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="100%"></p>
<ul class="task-list">
<li>
<input type="checkbox">add platform</li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="run-times">Run times<a class="anchor" aria-label="anchor" href="#run-times"></a>
</h1>
<div class="section level3">
<h3 id="speed-run-times-from-speedruncom">Speed run times from speedrun.com<a class="anchor" aria-label="anchor" href="#speed-run-times-from-speedruncom"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/all_run_raincloud.html">all_run_raincloud</a></span><span class="op">(</span><span class="va">src_run_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 582 rows containing missing values (`stat_slabinterval()`).</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Warning: Removed 582 rows containing non-finite values (`stat_boxplot()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 582 rows containing missing values (`stat_slabinterval()`).</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
<ul class="task-list">
<li>
<input type="checkbox">interpretable x axis</li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="segment-times">Segment times<a class="anchor" aria-label="anchor" href="#segment-times"></a>
</h1>
<div class="section level2">
<h2 id="label-chaos">Label chaos<a class="anchor" aria-label="anchor" href="#label-chaos"></a>
</h2>
</div>
<div class="section level2">
<h2 id="comparison-of-segments">Comparison of segments<a class="anchor" aria-label="anchor" href="#comparison-of-segments"></a>
</h2>
</div>
<div class="section level2">
<h2 id="single-segment-analyses">Single segment analyses<a class="anchor" aria-label="anchor" href="#single-segment-analyses"></a>
</h2>
</div>
</div>
<div class="section level1">
<h1 id="getting-the-data">Getting the data<a class="anchor" aria-label="anchor" href="#getting-the-data"></a>
</h1>
<div class="section level2">
<h2 id="sources">Sources<a class="anchor" aria-label="anchor" href="#sources"></a>
</h2>
<p>There are several sites where players upload Super Metroid speed running data.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="48%">
<col width="28%">
</colgroup>
<thead><tr class="header">
<th>site</th>
<th>api</th>
<th>description (why we’re interested, these assumptions should be checked)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://www.speedrun.com/supermetroid?h=Any&amp;x=9d8v96lk" class="external-link">speedrun</a></td>
<td>
<a href="https://github.com/blha303/srcomapi" class="external-link">python</a>(how to get historical?) &amp; <a href="https://github.com/glacials/splits-io/blob/master/docs/api.md" class="external-link">curl</a>
</td>
<td>most complete list of speed runs</td>
</tr>
<tr class="even">
<td><a href="https://splits.io/" class="external-link">splitio</a></td>
<td><a href="https://github.com/splitio/python-api" class="external-link">python</a></td>
<td>by-segment times for each run, but for a smaller number of runners than speedrun.com</td>
</tr>
<tr class="odd">
<td><a href="https://deertier.com/" class="external-link">deertier</a></td>
<td>there is an api, but I think we can get everything we need with <code>rvest</code>
</td>
<td>super metroid game-specific speed running site</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">source</span>, <span class="op">~</span><span class="va">runs</span>, <span class="op">~</span><span class="va">players</span>,</span>
<span>  <span class="st">"speedrun.com"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">src_run_df</span><span class="op">)</span>, <span class="cn">NA</span>,</span>
<span>  <span class="st">"splits.io"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span>  <span class="st">"deertier"</span>, <span class="cn">NA</span>, <span class="cn">NA</span></span>
<span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">source</th>
<th align="right">runs</th>
<th align="left">players</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">speedrun.com</td>
<td align="right">582</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">splits.io</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">deertier</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="desired-output-ggplot-friendlytidy-data">Desired output: <code>ggplot</code>-friendly/tidy data<a class="anchor" aria-label="anchor" href="#desired-output-ggplot-friendlytidy-data"></a>
</h2>
<p>Dataframes that describe runs, runners, and, eventually, categories. Ideally, aggregated across the datasets.</p>
<p>However, this will results in missing data, so specific analyses need to take that into account, or use source-specific datasets from the aggregated set with caveats. Linking ids are in italics.</p>
<p>Either way, we need to know what we have in each dataset, and have a universal schema across datasets.</p>
<div class="section level3">
<h3 id="runs">Runs<a class="anchor" aria-label="anchor" href="#runs"></a>
</h3>
<p>Each row describes one speed run; a player may have multiple runs in a database.</p>
<table class="table">
<thead><tr class="header">
<th>run_df</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>date</td>
<td>timestamp of run upload</td>
</tr>
<tr class="even">
<td><em>run_id</em></td>
<td>unique identifier of run</td>
</tr>
<tr class="odd">
<td>run_time</td>
<td>total time of run in s or ms</td>
</tr>
<tr class="even">
<td><em>player_id</em></td>
<td>unique identifier of player</td>
</tr>
<tr class="odd">
<td>rank</td>
<td>rank of player</td>
</tr>
</tbody>
</table>
<p>To build a speed run leaderboard across datasets, we’d need to do some fancy engineering, so we will focus on source-specific analyses for now. Each leaderboard comprises runs.</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="89%">
</colgroup>
<thead><tr class="header">
<th>run_df</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>date</td>
<td>timestamp of run upload</td>
</tr>
<tr class="even">
<td><em>run_id</em></td>
<td>unique identifier of run</td>
</tr>
<tr class="odd">
<td>run_time</td>
<td>total time of run in s or ms</td>
</tr>
<tr class="even">
<td><em>player_id</em></td>
<td>unique identifier of player</td>
</tr>
<tr class="odd">
<td>rank</td>
<td>rank of player</td>
</tr>
<tr class="even">
<td><em>src_id</em></td>
<td>speedrun.com id</td>
</tr>
<tr class="odd">
<td><em>sio_id</em></td>
<td>splits.io id</td>
</tr>
<tr class="even">
<td><em>deertier_id</em></td>
<td>deertier id</td>
</tr>
<tr class="odd">
<td>historical</td>
<td>if a historical ranking, need to inspect data to see how this should be recorded, possibly a bool, or putting NA in rank</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="location-of-players-on-speedruncom">Location of players on speedrun.com<a class="anchor" aria-label="anchor" href="#location-of-players-on-speedruncom"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>player_df</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>player_id</em></td>
<td>unique identifier of player</td>
</tr>
<tr class="even">
<td>player_handle</td>
<td>human-readable <strong>unique</strong> tag</td>
</tr>
<tr class="odd">
<td>location</td>
<td>geographic location of player</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="segments-for-each-run-from-splitsio">Segments for each run from splitsio<a class="anchor" aria-label="anchor" href="#segments-for-each-run-from-splitsio"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>segment_df</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>run_id</em></td>
<td>unique identifier of run</td>
</tr>
<tr class="even">
<td>segment_id</td>
<td>unique identifier of segment</td>
</tr>
<tr class="odd">
<td>t_s</td>
<td>time in seconds, measured to millisecond precision</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level1">
<h1 id="import-pkg--helper-functions">Import pkg &amp; helper functions<a class="anchor" aria-label="anchor" href="#import-pkg--helper-functions"></a>
</h1>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> srcomapi, srcomapi.datatypes <span class="im">as</span> dt</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="im">import</span> splitsio</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/tidyquant" class="external-link">tidyquant</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mjskay.github.io/ggdist/" class="external-link">ggdist</a></span><span class="op">)</span> <span class="co"># for rainclouds</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span> <span class="co"># Python &lt;-&gt; R</span></span>
<span></span>
<span><span class="co"># load r functions for this analysis</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://softloud.github.io/supermetroid/">supermetroid</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># helper function: saving an anonymous object in python </span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/4529815/saving-an-object-data-persistence</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">def</span> save_object(obj, filename):</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'wb'</span>) <span class="im">as</span> outp:  <span class="co"># Overwrites any existing file.</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>        pickle.dump(obj, outp, pickle.HIGHEST_PROTOCOL)</span></code></pre></div>
<div class="section level2">
<h2 id="last-updated">Last updated<a class="anchor" aria-label="anchor" href="#last-updated"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this chunk is evaluated when data is updated</span></span>
<span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html" class="external-link">write_rds</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html" class="external-link">today</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"data-raw/readme-updated.rds"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get last updated</span></span>
<span></span>
<span><span class="va">update_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html" class="external-link">read_rds</a></span><span class="op">(</span><span class="st">"data-raw/readme-updated.rds"</span><span class="op">)</span></span></code></pre></div>
<p>This read me was last updated: 2023-06-03.</p>
</div>
</div>
<div class="section level1">
<h1 id="speedruncom">speedrun.com<a class="anchor" aria-label="anchor" href="#speedruncom"></a>
</h1>
<div class="section level2">
<h2 id="load-runs-from-100-leaderboard">Load runs from 100% leaderboard<a class="anchor" aria-label="anchor" href="#load-runs-from-100-leaderboard"></a>
</h2>
<p>The game object was too nested to pickle, so runs have been extracted and saved.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># get the runs object wrangled above</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co"># data extracted in data-raw/get-src.py</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'data-raw/src_runs.pkl'</span>, <span class="st">'rb'</span>) <span class="im">as</span> inp:</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    src_runs <span class="op">=</span> pickle.load(inp)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co"># argh the fuck, why does this work when it's compiled, but not at the console?!</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    </span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># inspect runs object</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="bu">type</span>(src_runs)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">#&gt; &lt;class 'list'&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="bu">len</span>(src_runs)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt; 596</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co"># inspect one element</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>src_runs[<span class="dv">0</span>] </span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; {'place': 1, 'run': {'id': 'z5do82dm', 'weblink': 'https://www.speedrun.com/supermetroid/run/z5do82dm', 'game': 'm1zoemd0', 'level': None, 'category': 'xd1mpewd', 'videos': {'links': [{'uri': 'https://www.youtube.com/watch?v=vBdHFz9gTtM'}]}, 'comment': 'Oats raids always bring me the best luck. YES!!!!', 'status': {'status': 'verified', 'examiner': 'zxzno3ex', 'verify-date': '2021-07-31T17:57:05Z'}, 'players': [{'rel': 'user', 'id': 'zxzno3ex', 'uri': 'https://www.speedrun.com/api/v1/users/zxzno3ex'}], 'date': '2021-07-31', 'submitted': '2021-07-31T17:57:05Z', 'times': {'primary': 'PT1H12M53S', 'primary_t': 4373, 'realtime': 'PT1H12M53S', 'realtime_t': 4373, 'realtime_noloads': None, 'realtime_noloads_t': 0, 'ingame': 'PT42M', 'ingame_t': 2520}, 'system': {'platform': '83exk6l5', 'emulated': False, 'region': None}, 'splits': None, 'values': {'wle6dpr8': '21gezkxl', 'wl3dqoo8': 'jq6eyx3l'</span><span class="re">}}}</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="bu">type</span>(src_runs[<span class="dv">0</span>])</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; &lt;class 'dict'&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>src_runs[<span class="dv">0</span>].keys()</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co"># run element is a nested dictionary</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt; dict_keys(['place', 'run'])</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="bu">type</span>(src_runs[<span class="dv">0</span>][<span class="st">'run'</span>])</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt; &lt;class 'dict'&gt;</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>src_runs[<span class="dv">0</span>][<span class="st">'run'</span>].keys()</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#&gt; dict_keys(['id', 'weblink', 'game', 'level', 'category', 'videos', 'comment', 'status', 'players', 'date', 'submitted', 'times', 'system', 'splits', 'values'])</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co"># inspect a few elements</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>src_runs[<span class="dv">0</span>:<span class="dv">3</span>] </span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; [{'place': 1, 'run': {'id': 'z5do82dm', 'weblink': 'https://www.speedrun.com/supermetroid/run/z5do82dm', 'game': 'm1zoemd0', 'level': None, 'category': 'xd1mpewd', 'videos': {'links': [{'uri': 'https://www.youtube.com/watch?v=vBdHFz9gTtM'}]}, 'comment': 'Oats raids always bring me the best luck. YES!!!!', 'status': {'status': 'verified', 'examiner': 'zxzno3ex', 'verify-date': '2021-07-31T17:57:05Z'}, 'players': [{'rel': 'user', 'id': 'zxzno3ex', 'uri': 'https://www.speedrun.com/api/v1/users/zxzno3ex'}], 'date': '2021-07-31', 'submitted': '2021-07-31T17:57:05Z', 'times': {'primary': 'PT1H12M53S', 'primary_t': 4373, 'realtime': 'PT1H12M53S', 'realtime_t': 4373, 'realtime_noloads': None, 'realtime_noloads_t': 0, 'ingame': 'PT42M', 'ingame_t': 2520}, 'system': {'platform': '83exk6l5', 'emulated': False, 'region': None}, 'splits': None, 'values': {'wle6dpr8': '21gezkxl', 'wl3dqoo8': 'jq6eyx3l'</span><span class="re">}}}</span><span class="co">, {'place': 2, 'run': {'id': 'yo75d4dm', 'weblink': 'https://www.speedrun.com/supermetroid/run/yo75d4dm', 'game': 'm1zoemd0', 'level': None, 'category': 'xd1mpewd', 'videos': None, 'comment': 'video at\r\ndeertier.com\r\nor\r\nyoutube.com/zoasty', 'status': {'status': 'verified', 'examiner': '18v6k4nx', 'verify-date': '2021-07-02T12:31:43Z'}, 'players': [{'rel': 'user', 'id': '18v6k4nx', 'uri': 'https://www.speedrun.com/api/v1/users/18v6k4nx'}], 'date': '2021-02-24', 'submitted': '2021-07-02T12:31:43Z', 'times': {'primary': 'PT1H12M55S', 'primary_t': 4375, 'realtime': 'PT1H12M55S', 'realtime_t': 4375, 'realtime_noloads': None, 'realtime_noloads_t': 0, 'ingame': 'PT42M', 'ingame_t': 2520}, 'system': {'platform': '83exk6l5', 'emulated': False, 'region': None}, 'splits': None, 'values': {'wle6dpr8': '21gezkxl', 'wl3dqoo8': 'jq6eyx3l'</span><span class="re">}}}</span><span class="co">, {'place': 3, 'run': {'id': 'm36d0q6m', 'weblink': 'https://www.speedrun.com/supermetroid/run/m36d0q6m', 'game': 'm1zoemd0', 'level': None, 'category': 'xd1mpewd', 'videos': {'links': [{'uri': 'https://www.youtube.com/watch?v=7pqyw6eO5Gc'}]}, 'comment': 'wun twulf', 'status': {'status': 'verified', 'examiner': 'zxz2wy4x', 'verify-date': '2021-12-09T16:05:14Z'}, 'players': [{'rel': 'user', 'id': 'zxz2wy4x', 'uri': 'https://www.speedrun.com/api/v1/users/zxz2wy4x'}], 'date': '2021-12-08', 'submitted': '2021-12-09T16:05:14Z', 'times': {'primary': 'PT1H12M55.930S', 'primary_t': 4375.93, 'realtime': 'PT1H12M55.930S', 'realtime_t': 4375.93, 'realtime_noloads': None, 'realtime_noloads_t': 0, 'ingame': 'PT42M', 'ingame_t': 2520}, 'system': {'platform': '83exk6l5', 'emulated': False, 'region': None}, 'splits': None, 'values': {'wle6dpr8': '21gezkxl', 'wl3dqoo8': 'jq6eyx3l'</span><span class="re">}}}</span><span class="co">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-dataframe">Run dataframe<a class="anchor" aria-label="anchor" href="#run-dataframe"></a>
</h2>
<table class="table">
<colgroup>
<col width="10%">
<col width="52%">
<col width="36%">
</colgroup>
<thead><tr class="header">
<th>src_run_df</th>
<th>description</th>
<th>from</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>date</td>
<td>timestamp of run upload</td>
<td><code>runs[index]['run']['date']</code></td>
</tr>
<tr class="even">
<td><em>run_id</em></td>
<td>unique identifier of run</td>
<td><code>runs[index]['run']['date']</code></td>
</tr>
<tr class="odd">
<td>run_time</td>
<td>total time of run in s or ms</td>
<td><code>runs[index]['run']['times']['realtime_t']</code></td>
</tr>
<tr class="even">
<td><em>player_id</em></td>
<td>unique identifier of player</td>
<td>player id == run id, debug extraction</td>
</tr>
<tr class="odd">
<td>rank</td>
<td>rank, empty if historical, currently don’t have historical obs</td>
<td><code>src_runs[x]['place']</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>n_obs <span class="op">=</span> <span class="bu">len</span>(src_runs)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># how to get splits? [src_runs][x]['run']['splits']</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co"># extract elements with list comprehension</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>src_run_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>  <span class="st">'run_id'</span> : [src_runs[x][<span class="st">'run'</span>][<span class="st">'id'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(n_obs)],</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>  <span class="co"># need to inspect what happens to historical ranking</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>  <span class="st">'rank'</span> : [src_runs[x][<span class="st">'place'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(n_obs)], </span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="st">'t_s'</span> : [src_runs[x][<span class="st">'run'</span>][<span class="st">'times'</span>][<span class="st">'realtime_t'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(n_obs)],</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>  <span class="st">'date'</span> : [src_runs[x][<span class="st">'run'</span>][<span class="st">'date'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(n_obs)],</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>  <span class="st">'player'</span> : [pd.DataFrame(src_runs[x][<span class="st">'run'</span>][<span class="st">'players'</span>]).iloc[<span class="dv">0</span>,<span class="dv">1</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(n_obs)]</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>})</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="co"># inspect runs dataframe</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>src_run_df.head()</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="co">#&gt;      run_id  rank      t_s        date    player</span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="co">#&gt; 0  z5do82dm     1  4373.00  2021-07-31  zxzno3ex</span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="co">#&gt; 1  yo75d4dm     2  4375.00  2021-02-24  18v6k4nx</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a><span class="co">#&gt; 2  m36d0q6m     3  4375.93  2021-12-08  zxz2wy4x</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="co">#&gt; 3  m3qo724y     4  4392.00  2023-05-08  xk49m26j</span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="co">#&gt; 4  y4g31v3y     5  4442.00  2022-12-10  x35ve3kj</span></span></code></pre></div>
<div class="section level3">
<h3 id="visualise-runs">Visualise runs<a class="anchor" aria-label="anchor" href="#visualise-runs"></a>
</h3>
<p>Now we have the data from speedrun.com leaderboard, we can plot the distribution of runs.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the data from python into R</span></span>
<span></span>
<span><span class="va">src_run_raw</span> <span class="op">&lt;-</span> <span class="va">py</span><span class="op">$</span><span class="va">src_run_df</span></span>
<span></span>
<span><span class="fu"><a href="reference/all_run_raincloud.html">all_run_raincloud</a></span><span class="op">(</span><span class="va">src_run_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 596 rows containing missing values (`stat_slabinterval()`).</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Warning: Removed 596 rows containing non-finite values (`stat_boxplot()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 596 rows containing missing values (`stat_slabinterval()`).</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-16-1.png" width="100%"></p>
<p>We have a handful of 0 entries and some &gt; 3 hours.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># how many runs are really low?</span></span>
<span><span class="va">src_run_raw</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">t_s</span> <span class="op">&lt;</span> <span class="fl">4000</span> <span class="op">|</span> <span class="va">t_s</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">60</span> <span class="op">*</span> <span class="fl">60</span><span class="op">)</span></span>
<span><span class="co">#&gt;      run_id rank       t_s       date   player</span></span>
<span><span class="co">#&gt; 1  mk5q77xm  584  11760.00 2021-10-03 qjnldw4x</span></span>
<span><span class="co">#&gt; 2  z05785jm  585  12000.00 2020-05-26 v8lpwk7j</span></span>
<span><span class="co">#&gt; 3  zpg3djxz  586  12015.00 2023-01-08 j20563px</span></span>
<span><span class="co">#&gt; 4  zp1n1rnz  587  12357.00 2021-04-10 8wk1zz48</span></span>
<span><span class="co">#&gt; 5  yor95l1y  588  21003.81 2021-12-24 y8d9w3gx</span></span>
<span><span class="co">#&gt; 6  yjp79v7y  589  25483.56 2022-05-05 qjn072qx</span></span>
<span><span class="co">#&gt; 7  y6p3gxjm  590 199158.00 2017-06-08 dx3l5p6x</span></span>
<span><span class="co">#&gt; 8  y20nprwm  591      0.00 2022-02-23 x7m21p6x</span></span>
<span><span class="co">#&gt; 9  znp3nvvm  592      0.00 2022-05-07 8gez077j</span></span>
<span><span class="co">#&gt; 10 ywp6dqnz  593      0.00 2018-11-06 kj9oo2vj</span></span>
<span><span class="co">#&gt; 11 y21k26wz  594      0.00 2019-12-06 j921z1n8</span></span>
<span><span class="co">#&gt; 12 yv8peoxm  595      0.00 2023-02-19 j40o9vw8</span></span>
<span><span class="co">#&gt; 13 yl9oenxy  596      0.00 2017-08-02 1xykvdw8</span></span></code></pre></div>
<p>The 0 entries are run times where <code>gametime</code> was captured, but <code>realtime</code> was not by the tool the player used to record the run. Our analyses are on <code>realtime</code>, so we will exclude these observations.</p>
<p>We are also interest in comparing <em>speed runners</em>, as opposed to those logging playing through the game, which takes some hours.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">prop_greater_3hrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">src_run_raw</span><span class="op">$</span><span class="va">t_s</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">60</span> <span class="op">*</span> <span class="fl">60</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">src_run_raw</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.01174497</span></span></code></pre></div>
<p>Since only {r round(prop_greater_3hrs, 2) * 100}% of runs are greater than 3 hours, these are negligible, and arguably not <em>speed</em> runs. We will define a Super Metroid speed run, for this analysis, to be a Super Metroid 100% run that takes under 3 hours.</p>
</div>
<div class="section level3">
<h3 id="raincloud">Raincloud<a class="anchor" aria-label="anchor" href="#raincloud"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">src_run_raw</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="co"># remove 0 length runs</span></span>
<span>    <span class="va">t_s</span> <span class="op">&gt;</span> <span class="fl">0</span>, </span>
<span>    <span class="co"># exclude runs &gt; 3 hours</span></span>
<span>    <span class="va">t_s</span> <span class="op">&lt;</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">60</span> <span class="op">*</span> <span class="fl">60</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="reference/all_run_raincloud.html">all_run_raincloud</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 582 rows containing missing values (`stat_slabinterval()`).</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Warning: Removed 582 rows containing non-finite values (`stat_boxplot()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 582 rows containing missing values (`stat_slabinterval()`).</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span>
<span><span class="co">#&gt; Unknown or uninitialised column: `dist`.</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-19-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="write-run-data-from-speedruncom-to-supermetroid">Write run data from speedrun.com to supermetroid<a class="anchor" aria-label="anchor" href="#write-run-data-from-speedruncom-to-supermetroid"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this chunk is evaluated when data is updated</span></span>
<span><span class="va">src_run_df</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">src_run_raw</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">t_s</span> <span class="op">&gt;</span> <span class="fl">0</span>,<span class="va">t_s</span> <span class="op">&lt;</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">60</span> <span class="op">*</span> <span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">use_data</a></span><span class="op">(</span><span class="va">src_run_df</span>, overwrite<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="player-data">Player data<a class="anchor" aria-label="anchor" href="#player-data"></a>
</h2>
<div class="section level3">
<h3 id="location-of-players-on-speedruncom-1">Location of players on speedrun.com<a class="anchor" aria-label="anchor" href="#location-of-players-on-speedruncom-1"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>player_df</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>player_id</em></td>
<td>unique identifier of player</td>
</tr>
<tr class="even">
<td>player_handle</td>
<td>human-readable <strong>unique</strong> tag</td>
</tr>
<tr class="odd">
<td>location</td>
<td>geographic location of player</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>src_api <span class="op">=</span> srcomapi.SpeedrunCom()<span class="op">;</span> api.debug <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'api' is not defined</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>player_locations <span class="op">=</span> []</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>player_handles <span class="op">=</span> []</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>players <span class="op">=</span> []</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># this loop fails because not all ids are valid</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># get a list of player records for each valid player id</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>src_players <span class="op">=</span> []</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="cf">for</span> player <span class="kw">in</span> src_run_df.player:</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"loop index"</span>)</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>  <span class="bu">print</span>(<span class="bu">len</span>(src_players))</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>  <span class="bu">print</span>(player)</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>  user <span class="op">=</span> src_api.get_user(player)</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>  src_players.append(user)</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="co"># extract player data into dataframe    </span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a><span class="co">#&gt; Error: srcomapi.exceptions.APIRequestException: (404, 'Not Found', 'users/LynxXUnlimited')</span></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>players <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>  <span class="st">'player_id'</span> : [src_players[x].<span class="bu">id</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(src_players))],</span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>  <span class="st">'player_name'</span> : [src_players[x].name <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(src_players))],</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>  <span class="st">'location'</span> : [src_players[x].location[<span class="st">'country'</span>][<span class="st">'names'</span>][<span class="st">'international'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(src_players))] </span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>})</span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>  </span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># curiously this works on first three records</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co"># get a list of player records for each valid player id</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>src_players <span class="op">=</span> []</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a><span class="cf">for</span> player <span class="kw">in</span> src_run_df.player[<span class="dv">0</span>:<span class="dv">3</span>]:</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"loop index"</span>)</span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a>  <span class="bu">print</span>(<span class="bu">len</span>(src_players))</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>  <span class="bu">print</span>(player)</span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>  user <span class="op">=</span> src_api.get_user(player)</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a>  src_players.append(user)</span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="co">#&gt; loop index</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="co">#&gt; zxzno3ex</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="co">#&gt; loop index</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a><span class="co">#&gt; 18v6k4nx</span></span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a><span class="co">#&gt; loop index</span></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a><span class="co">#&gt; 2</span></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a><span class="co">#&gt; zxz2wy4x</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># extract player data into dataframe    </span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>src_players_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="st">'player_id'</span> : [src_players[x].<span class="bu">id</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(src_players))],</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  <span class="st">'player_name'</span> : [src_players[x].name <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(src_players))],</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>  <span class="st">'location'</span> : [src_players[x].location[<span class="st">'country'</span>][<span class="st">'names'</span>][<span class="st">'international'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(src_players))] </span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>})</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>  </span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>src_players_df.head()</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="co">#&gt;   player_id player_name       location</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="co">#&gt; 0  zxzno3ex   ShinyZeni  United States</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="co">#&gt; 1  18v6k4nx       zoast          Palau</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="co">#&gt; 2  zxz2wy4x  Behemoth87        England</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="not-all-ids-are-valid">Not all ids are valid<a class="anchor" aria-label="anchor" href="#not-all-ids-are-valid"></a>
</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="co"># get users with length 8 ids </span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="co"># filter out ids that don't contain numbers (some are player handles)</span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="co"># (hopefully these will capture the valid apis)</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="co"># the player id extracted does not always match to api</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="co"># api uri is also wrong, matches the incorrect player id</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>src_run_df.player.<span class="bu">str</span>.<span class="bu">len</span>().value_counts()</span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="co"># take a look at the records with strings not of length 8</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a><span class="co">#&gt; 8     510</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a><span class="co">#&gt; 10     19</span></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a><span class="co">#&gt; 9      11</span></span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a><span class="co">#&gt; 7      10</span></span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a><span class="co">#&gt; 11      8</span></span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a><span class="co">#&gt; 6       7</span></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a><span class="co">#&gt; 14      6</span></span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a><span class="co">#&gt; 15      5</span></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a><span class="co">#&gt; 13      5</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a><span class="co">#&gt; 12      4</span></span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a><span class="co">#&gt; 4       4</span></span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a><span class="co">#&gt; 5       4</span></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a><span class="co">#&gt; 19      1</span></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a><span class="co">#&gt; 18      1</span></span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a><span class="co">#&gt; 16      1</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="co">#&gt; Name: player, dtype: int64</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a>src_run_df.assign(id_len <span class="op">=</span> <span class="kw">lambda</span> x: x.player.<span class="bu">str</span>.<span class="bu">len</span>()).query(<span class="st">'id_len != 8'</span>)</span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="co">#&gt;        run_id  rank     t_s        date          player  id_len</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a><span class="co">#&gt; 6    me16939y     7  4485.0  2022-04-03  LynxXUnlimited      14</span></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a><span class="co">#&gt; 71   z1j38k7z    72  4955.0  2019-06-02      Flowsouth8      10</span></span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a><span class="co">#&gt; 98   nz167pwm    99  5031.0  2014-12-11      Yeahboiii5      10</span></span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a><span class="co">#&gt; 135  9yowdv5z   136  5161.0  2017-02-27     Sweetkid689      11</span></span>
<span id="cb26-34"><a href="#cb26-34" tabindex="-1"></a><span class="co">#&gt; 147  wzpjjkrz   148  5206.0  2017-03-08      Dhaos Tk31      10</span></span>
<span id="cb26-35"><a href="#cb26-35" tabindex="-1"></a><span class="co">#&gt; ..        ...   ...     ...         ...             ...     ...</span></span>
<span id="cb26-36"><a href="#cb26-36" tabindex="-1"></a><span class="co">#&gt; 564  9mrd504z   565  8789.0  2015-05-03      hubert0987      10</span></span>
<span id="cb26-37"><a href="#cb26-37" tabindex="-1"></a><span class="co">#&gt; 567  1zx05jgz   568  8937.0  2015-02-24   Hellmessenger      13</span></span>
<span id="cb26-38"><a href="#cb26-38" tabindex="-1"></a><span class="co">#&gt; 569  pydpj3xy   570  9060.0  2017-01-20      playingg0d      10</span></span>
<span id="cb26-39"><a href="#cb26-39" tabindex="-1"></a><span class="co">#&gt; 571  kz5w6ldz   572  9407.0        None       PinkTeddy       9</span></span>
<span id="cb26-40"><a href="#cb26-40" tabindex="-1"></a><span class="co">#&gt; 573  pm3v2w6z   574  9808.0  2016-10-23     jewelediris      11</span></span>
<span id="cb26-41"><a href="#cb26-41" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb26-42"><a href="#cb26-42" tabindex="-1"></a><span class="co">#&gt; [86 rows x 6 columns]</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="splitsio">splits.io<a class="anchor" aria-label="anchor" href="#splitsio"></a>
</h1>
<div class="section level2">
<h2 id="load-runs-and-runners">Load runs and runners<a class="anchor" aria-label="anchor" href="#load-runs-and-runners"></a>
</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># this chunk is not evaluated </span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co"># to minimise api calls</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co"># get 100% Category Super Metroid game data  </span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>sio_cat <span class="op">=</span> splitsio.Category.from_id(<span class="st">"279"</span>, historic<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>save_object(sio_cat, <span class="st">"data-raw/sio_cat.pkl"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># load sio data</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'data-raw/sio_cat.pkl'</span>, <span class="st">'rb'</span>) <span class="im">as</span> inp:</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    sio_cat <span class="op">=</span> pickle.load(inp)</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="co"># extract runners and run from category</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>sio_runners <span class="op">=</span> sio_cat.runners()</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>sio_runs <span class="op">=</span> sio_cat.runs()</span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="try-with-converting-to-a-dictionary-much-earlier">Try with converting to a dictionary much earlier<a class="anchor" aria-label="anchor" href="#try-with-converting-to-a-dictionary-much-earlier"></a>
</h1>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>sio_run_dict_max <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>sio_run_dicts <span class="op">=</span> [sio_runs[x].to_dict() <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(sio_run_dict_max)]</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="co"># each element of the list is a dictionary with keys</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>sio_run_dicts[<span class="dv">0</span>].keys()</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="co">#&gt; dict_keys(['id', 'srdc_id', 'realtime_duration_ms', 'realtime_sum_of_best_ms', 'gametime_duration_ms', 'gametime_sum_of_best_ms', 'default_timing', 'program', 'attempts', 'image_url', 'parsed_at', 'created_at', 'updated_at', 'video_url', 'game', 'category', 'runners', 'segments', 'histories'])</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">testing_index</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span></span>
<span><span class="co"># find </span></span></code></pre></div>
<div class="section level2">
<h2 id="inspect-data">Inspect data<a class="anchor" aria-label="anchor" href="#inspect-data"></a>
</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># take a look at a run</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>sio_runs[<span class="dv">0</span>]</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co"># can we call nested elements by index and key?</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co">#&gt; Run(id='ato1', srdc_id=None, realtime_duration_ms=7013075, realtime_sum_of_best_ms=6651338, gametime_duration_ms=5050217, gametime_sum_of_best_ms=4788713, default_timing='real', program='livesplit', attempts=8, image_url=None, parsed_at='2023-06-04T09:38:27.836Z', created_at='2023-06-04T09:38:07.030Z', updated_at='2023-06-04T09:38:27.850Z', video_url=None, game=Game(id='50', name='Super Metroid', shortname='supermetroid'), category=Category(id='279', name='100%'), runners=[Runner(id='89646', twitch_id=None, twitch_name=None, display_name='anatomecha', name='anatomecha')])</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="bu">type</span>(sio_runs[<span class="dv">0</span>])</span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="co"># I think this is a series object?</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="co">#&gt; &lt;class 'splitsio.api.Run'&gt;</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="bu">print</span>(pd.DataFrame(sio_runs[<span class="dv">1</span>:<span class="dv">3</span>]))</span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="co">#&gt;      id srdc_id  ...                                           segments  histories</span></span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a><span class="co">#&gt; 0  asmc    None  ...  [{'id': '66be0a6c-9c80-4309-8705-843e8ea71aa4'...       None</span></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a><span class="co">#&gt; 1  amuv    None  ...  [{'id': 'f847b639-9003-480e-9c5c-51d25e247df5'...       None</span></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a><span class="co">#&gt; [2 rows x 19 columns]</span></span>
<span id="cb31-15"><a href="#cb31-15" tabindex="-1"></a><span class="bu">print</span>(pd.DataFrame(sio_runs[<span class="dv">1</span>:<span class="dv">3</span>]).columns)</span>
<span id="cb31-16"><a href="#cb31-16" tabindex="-1"></a><span class="co">#&gt; Index(['id', 'srdc_id', 'realtime_duration_ms', 'realtime_sum_of_best_ms',</span></span>
<span id="cb31-17"><a href="#cb31-17" tabindex="-1"></a><span class="co">#&gt;        'gametime_duration_ms', 'gametime_sum_of_best_ms', 'default_timing',</span></span>
<span id="cb31-18"><a href="#cb31-18" tabindex="-1"></a><span class="co">#&gt;        'program', 'attempts', 'image_url', 'parsed_at', 'created_at',</span></span>
<span id="cb31-19"><a href="#cb31-19" tabindex="-1"></a><span class="co">#&gt;        'updated_at', 'video_url', 'game', 'category', 'runners', 'segments',</span></span>
<span id="cb31-20"><a href="#cb31-20" tabindex="-1"></a><span class="co">#&gt;        'histories'],</span></span>
<span id="cb31-21"><a href="#cb31-21" tabindex="-1"></a><span class="co">#&gt;       dtype='object')</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co"># take a look at a runner</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>sio_runners[<span class="dv">0</span>]</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="co">#&gt; Runner(id='284', twitch_id='37537140', twitch_name='dyceron', display_name='Dyceron', name='Dyceron')</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-dataframe-1">Run dataframe<a class="anchor" aria-label="anchor" href="#run-dataframe-1"></a>
</h2>
<p>Objective: to wrangle a data frame with run data</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="44%">
<col width="48%">
</colgroup>
<thead><tr class="header">
<th>sio_run_df</th>
<th>description</th>
<th>splitsio</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>run_id</em></td>
<td>splits.io id</td>
<td><code>id</code></td>
</tr>
<tr class="even">
<td>date</td>
<td>timestamp of run upload</td>
<td>? <code>'created_at', 'parsed_at', 'updated_at'</code> we’ll use ‘updated_at’ for now, but should check splitsio docs for which</td>
</tr>
<tr class="odd">
<td>run_time</td>
<td>total time of run in s or ms</td>
<td><code>realtime_duration_ms</code></td>
</tr>
<tr class="even">
<td>rank</td>
<td>“historical” if from previous record (nb only applies to speedrun.com); otherwise rank as int, list column</td>
<td>?</td>
</tr>
<tr class="odd">
<td>src_player_id</td>
<td>speedrun.com player id</td>
<td><code>srdc_id</code></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="try-with-list-of-dictionaries">Try with list of dictionaries<a class="anchor" aria-label="anchor" href="#try-with-list-of-dictionaries"></a>
</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>sio_run_dicts <span class="op">=</span> [sio_runs[x].to_dict() <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))]</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="co"># each element is a dictionary with keys</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>sio_run_dicts[<span class="dv">0</span>].keys()</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="co">#&gt; dict_keys(['id', 'srdc_id', 'realtime_duration_ms', 'realtime_sum_of_best_ms', 'gametime_duration_ms', 'gametime_sum_of_best_ms', 'default_timing', 'program', 'attempts', 'image_url', 'parsed_at', 'created_at', 'updated_at', 'video_url', 'game', 'category', 'runners', 'segments', 'histories'])</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co"># run id</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>sio_run_dicts[<span class="dv">0</span>].keys()</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="co"># get id</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="co">#&gt; dict_keys(['id', 'srdc_id', 'realtime_duration_ms', 'realtime_sum_of_best_ms', 'gametime_duration_ms', 'gametime_sum_of_best_ms', 'default_timing', 'program', 'attempts', 'image_url', 'parsed_at', 'created_at', 'updated_at', 'video_url', 'game', 'category', 'runners', 'segments', 'histories'])</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a>sio_run_dicts[<span class="dv">0</span>][<span class="st">'id'</span>]</span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a><span class="co"># get realtime</span></span>
<span id="cb34-9"><a href="#cb34-9" tabindex="-1"></a><span class="co">#&gt; 'ato1'</span></span>
<span id="cb34-10"><a href="#cb34-10" tabindex="-1"></a>sio_run_dicts[<span class="dv">0</span>][<span class="st">'realtime_duration_ms'</span>]</span>
<span id="cb34-11"><a href="#cb34-11" tabindex="-1"></a><span class="co">#&gt; 7013075</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="co"># player data</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>pd.json_normalize(sio_run_dicts[<span class="dv">0</span>][<span class="st">'runners'</span>])[<span class="st">'id'</span>][<span class="dv">0</span>]</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="co">#&gt; '89646'</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>sio_run_player_index <span class="op">=</span> <span class="dv">10</span> <span class="co"># len(sio_run_dicts)</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>run_runners_list <span class="op">=</span> [pd.json_normalize(sio_run_dicts[x][<span class="st">'runners'</span>]).assign(run_id <span class="op">=</span> sio_runs[x].<span class="bu">id</span>) <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))]</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>run_runners_concat <span class="op">=</span> pd.concat(run_runners)</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'run_runners' is not defined</span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>run_runners <span class="op">=</span> run_runners_concat[[<span class="st">'display_name'</span>, <span class="st">'name'</span>, <span class="st">'run_id'</span>,<span class="st">'id'</span>]].rename(columns<span class="op">=</span>{<span class="st">'id'</span>:<span class="st">'player_id'</span>, <span class="st">'name'</span>:<span class="st">'player_name'</span>})</span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'run_runners_concat' is not defined</span></span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a><span class="bu">len</span>(run_runners) <span class="op">!=</span> <span class="bu">len</span>(sio_runs) <span class="co"># :( whyeee</span></span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'run_runners' is not defined</span></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>sio_run_dicts[<span class="dv">0</span>].keys()</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a><span class="co">#&gt; dict_keys(['id', 'srdc_id', 'realtime_duration_ms', 'realtime_sum_of_best_ms', 'gametime_duration_ms', 'gametime_sum_of_best_ms', 'default_timing', 'program', 'attempts', 'image_url', 'parsed_at', 'created_at', 'updated_at', 'video_url', 'game', 'category', 'runners', 'segments', 'histories'])</span></span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a>sio_runs_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a>  <span class="st">'run_id'</span> : [sio_run_dicts[x][<span class="st">'id'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))],</span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a>  <span class="st">'t_ms'</span> : [sio_run_dicts[x][<span class="st">'realtime_duration_ms'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))],</span>
<span id="cb35-19"><a href="#cb35-19" tabindex="-1"></a>  <span class="st">'date'</span> : [sio_run_dicts[x][<span class="st">'updated_at'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))],</span>
<span id="cb35-20"><a href="#cb35-20" tabindex="-1"></a>  <span class="st">'image_url'</span>: [sio_run_dicts[x][<span class="st">'image_url'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))],</span>
<span id="cb35-21"><a href="#cb35-21" tabindex="-1"></a>  <span class="st">'video_url'</span>: [sio_run_dicts[x][<span class="st">'video_url'</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(sio_runs))]</span>
<span id="cb35-22"><a href="#cb35-22" tabindex="-1"></a>}).merge(run_runners, on <span class="op">=</span> <span class="st">"run_id"</span>, how <span class="op">=</span> <span class="st">'left'</span>).set_index(<span class="st">'run_id'</span>)</span>
<span id="cb35-23"><a href="#cb35-23" tabindex="-1"></a></span>
<span id="cb35-24"><a href="#cb35-24" tabindex="-1"></a><span class="co"># get segments</span></span>
<span id="cb35-25"><a href="#cb35-25" tabindex="-1"></a></span>
<span id="cb35-26"><a href="#cb35-26" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'run_runners' is not defined</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inspect_sio_runs</span> <span class="op">&lt;-</span> <span class="va">py</span><span class="op">$</span><span class="va">sio_runs_df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"url"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">display_name</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): AttributeError: module '__main__' has no attribute 'sio_runs_df'</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-segments-dataframe">create segments dataframe<a class="anchor" aria-label="anchor" href="#create-segments-dataframe"></a>
</h2>
<table class="table">
<thead><tr class="header">
<th>segment_df</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>run_id</em></td>
<td>unique identifier of run</td>
</tr>
<tr class="even">
<td>segment_id</td>
<td>unique identifier of segment</td>
</tr>
<tr class="odd">
<td>t_s</td>
<td>time in seconds, measured to millisecond precision</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co"># first level of segments</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="bu">type</span>(sio_df[<span class="st">'segments'</span>][<span class="dv">0</span>])</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'sio_df' is not defined</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="bu">len</span>(sio_df[<span class="st">'segments'</span>][<span class="dv">0</span>])</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a><span class="co"># second level of segments</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'sio_df' is not defined</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="bu">type</span>(sio_df[<span class="st">'segments'</span>][<span class="dv">0</span>][<span class="dv">0</span>])</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'sio_df' is not defined</span></span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>sio_df[<span class="st">'segments'</span>][<span class="dv">0</span>][<span class="dv">2</span>].keys()</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'sio_df' is not defined</span></span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a>segments_list <span class="op">=</span> [pd.DataFrame(sio_df.segments[x]).assign(run_id <span class="op">=</span> sio_df.<span class="bu">id</span>[x]) <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(sio_df.shape[<span class="dv">0</span>]) ]</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'sio_df' is not defined</span></span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a>segment_raw <span class="op">=</span> pd.concat(segments_list)</span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'segments_list' is not defined</span></span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a>segment_raw.columns</span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'segment_raw' is not defined</span></span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a>segment_raw.shape</span>
<span id="cb37-20"><a href="#cb37-20" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'segment_raw' is not defined</span></span>
<span id="cb37-21"><a href="#cb37-21" tabindex="-1"></a>sio_segments_df <span class="op">=</span> segment_raw.merge(</span>
<span id="cb37-22"><a href="#cb37-22" tabindex="-1"></a>  sio_runs_df[[<span class="st">'player_name'</span>, <span class="st">'player_id'</span>]], on <span class="op">=</span> <span class="st">"run_id"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb37-23"><a href="#cb37-23" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" tabindex="-1"></a><span class="co">#&gt; Error: NameError: name 'segment_raw' is not defined</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># tidy it up in R before writing it</span></span>
<span></span>
<span><span class="va">sio_segments</span> <span class="op">&lt;-</span> <span class="va">py</span><span class="op">$</span><span class="va">sio_segments_df</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): AttributeError: module '__main__' has no attribute 'sio_segments_df'</span></span>
<span></span>
<span></span>
<span><span class="va">sio_splits_df</span> <span class="op">&lt;-</span> </span>
<span><span class="va">sio_segments</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">player_name</span>, </span>
<span>    game_event <span class="op">=</span> <span class="va">display_name</span>, </span>
<span>    <span class="va">segment_number</span>, </span>
<span>    <span class="va">realtime_start_ms</span>, </span>
<span>    segment_id <span class="op">=</span> <span class="va">id</span>,</span>
<span>    <span class="va">run_id</span>,</span>
<span>    <span class="va">player_id</span>,</span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"gametime"</span><span class="op">)</span>,</span>
<span>         <span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"reduced"</span><span class="op">)</span>,</span>
<span>         <span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"skipped"</span><span class="op">)</span>, <span class="op">-</span><span class="va">histories</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'sio_segments' not found</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">use_data</a></span><span class="op">(</span><span class="va">sio_splits_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="fucking-segment-labels">fucking segment labels<a class="anchor" aria-label="anchor" href="#fucking-segment-labels"></a>
</h2>
<p>This could easily be its own vignette, it’s so complicated.</p>
</div>
</div>
<div class="section level1">
<h1 id="deertier">deertier<a class="anchor" aria-label="anchor" href="#deertier"></a>
</h1>
</div>
<div class="section level1">
<h1 id="speedrunslive">speedrunslive<a class="anchor" aria-label="anchor" href="#speedrunslive"></a>
</h1>
</div>
<div class="section level1">
<h1 id="wikipedia">wikipedia<a class="anchor" aria-label="anchor" href="#wikipedia"></a>
</h1>
</div>
<div class="section level1">
<h1 id="later">later<a class="anchor" aria-label="anchor" href="#later"></a>
</h1>
<ul class="task-list">
<li>
<input type="checkbox">You’ll still need to render <code>README.Rmd</code> regularly, to keep <code>README.md</code> up-to-date. <code><a href="https://devtools.r-lib.org/reference/build_rmd.html" class="external-link">devtools::build_readme()</a></code> is handy for this. You could also use GitHub Actions to re-render <code>README.Rmd</code> every time you push. An example workflow can be found here: <a href="https://github.com/r-lib/actions/tree/v1/examples" class="external-link uri">https://github.com/r-lib/actions/tree/v1/examples</a>.</li>
</ul>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>`use_mit_license()`, `use_gpl3_license()` or friends to pick a
    license</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing supermetroid</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Charles Gray <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/YOUR-ORCID-ID" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Charles Gray.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
